apiVersion: spinnaker.armory.io/v1alpha2
kind: SpinnakerService
metadata:
  name: spinnaker
spec:
  # spec.spinnakerConfig - This section is how to specify configuration spinnaker
  spinnakerConfig:
    # spec.spinnakerConfig.config - This section contains the contents of a deployment found in a halconfig .deploymentConfigurations[0]
    config:
      security:
        authn:
          oauth2:
            enabled: true
            client:
              clientId: encrypted:k8s!n:account-secrets!k:github-client-id
              clientSecret: encrypted:k8s!n:account-secrets!k:github-client-secret
              accessTokenUri: https://github.com/login/oauth/access_token
              userAuthorizationUri: https://github.com/login/oauth/authorize
              scope: read:org,user:email
              preEstablishedRedirectUri: https://spin.armory.garreeoke.io/api/login
              useCurrentUri: false
            resource:
              userInfoUri: https://api.github.com/user
            userInfoMapping:
              email: email
              firstName: ''
              lastName: name
              username: login
            provider: GITHUB
        authz:
          enabled: false
          groupMembership: 
            service: GITHUB
            github:
              roleProviderType: GITHUB
              accessToken: 377c688e7366f7f261d2ef777852b2a3af520628
              organization: aaront-spin
              baseUrl: https://api.github.com